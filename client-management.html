<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitCoach Pro - Client Management</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="client-management.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        // Authentication check - must be logged in to access this page
        (function() {
            const user = JSON.parse(localStorage.getItem('fitcoach_user') || 'null');
            if (!user || !user.isLoggedIn) {
                window.location.href = 'index.html';
                return;
            }
        })();
    </script>
    <script src="auth.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="dashboard-header">
        <div class="container">
            <div class="header-content">
                <div class="header-left">
                    <a href="coach-dashboard.html" class="back-btn">
                        <i class="fas fa-arrow-left"></i> Dashboard
                    </a>
                    <h1><i class="fas fa-users-cog"></i> Client Management</h1>
                </div>
                <div class="user-info">
                    <span class="user-name">Coach Smith</span>
                    <a href="INDEX.HTML" class="home-btn">
                        <i class="fas fa-home"></i> Home
                    </a>
                    <a href="#" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                    <img src="https://via.placeholder.com/40x40" alt="Profile" class="profile-pic">
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="client-management-main">
        <div class="container">
            <!-- Client Search and Filter -->
            <section class="client-controls">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search clients..." id="clientSearch">
                </div>
                <div class="filter-controls">
                    <select id="statusFilter">
                        <option value="all">All Clients</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                        <option value="trial">Trial</option>
                    </select>
                    <button class="btn btn-primary" onclick="addNewClient()">
                        <i class="fas fa-user-plus"></i> Add New Client
                    </button>
                </div>
            </section>

            <!-- Client List -->
            <section class="client-list">
                <div class="client-card" data-client-id="1">
                    <div class="client-header">
                        <div class="client-basic-info">
                            <img src="https://via.placeholder.com/60x60" alt="Sarah Johnson" class="client-avatar">
                            <div class="client-details">
                                <h3>Sarah Johnson</h3>
                                <span class="client-email">sarah.johnson@email.com</span>
                                <span class="client-status active">Active</span>
                            </div>
                        </div>
                        <div class="client-actions">
                            <button class="edit-client-btn" onclick="editClient(1)">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="view-progress-btn" onclick="viewProgress(1)">
                                <i class="fas fa-chart-line"></i> Progress
                            </button>
                        </div>
                    </div>
                    <div class="client-stats">
                        <div class="stat-item">
                            <span class="stat-label">Goal</span>
                            <span class="stat-value">Weight Loss</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Progress</span>
                            <span class="stat-value">75%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Sessions</span>
                            <span class="stat-value">24/30</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Next Session</span>
                            <span class="stat-value">Nov 2, 9:00 AM</span>
                        </div>
                    </div>
                </div>

                <div class="client-card" data-client-id="2">
                    <div class="client-header">
                        <div class="client-basic-info">
                            <img src="https://via.placeholder.com/60x60" alt="Mike Chen" class="client-avatar">
                            <div class="client-details">
                                <h3>Mike Chen</h3>
                                <span class="client-email">mike.chen@email.com</span>
                                <span class="client-status active">Active</span>
                            </div>
                        </div>
                        <div class="client-actions">
                            <button class="edit-client-btn" onclick="editClient(2)">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="view-progress-btn" onclick="viewProgress(2)">
                                <i class="fas fa-chart-line"></i> Progress
                            </button>
                        </div>
                    </div>
                    <div class="client-stats">
                        <div class="stat-item">
                            <span class="stat-label">Goal</span>
                            <span class="stat-value">Muscle Gain</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Progress</span>
                            <span class="stat-value">60%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Sessions</span>
                            <span class="stat-value">18/25</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Next Session</span>
                            <span class="stat-value">Nov 3, 10:30 AM</span>
                        </div>
                    </div>
                </div>

                <div class="client-card" data-client-id="3">
                    <div class="client-header">
                        <div class="client-basic-info">
                            <img src="https://via.placeholder.com/60x60" alt="Emily Davis" class="client-avatar">
                            <div class="client-details">
                                <h3>Emily Davis</h3>
                                <span class="client-email">emily.davis@email.com</span>
                                <span class="client-status trial">Trial</span>
                            </div>
                        </div>
                        <div class="client-actions">
                            <button class="edit-client-btn" onclick="editClient(3)">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="view-progress-btn" onclick="viewProgress(3)">
                                <i class="fas fa-chart-line"></i> Progress
                            </button>
                        </div>
                    </div>
                    <div class="client-stats">
                        <div class="stat-item">
                            <span class="stat-label">Goal</span>
                            <span class="stat-value">Endurance</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Progress</span>
                            <span class="stat-value">90%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Sessions</span>
                            <span class="stat-value">5/7</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Next Session</span>
                            <span class="stat-value">Nov 4, 2:00 PM</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Edit Client Modal -->
    <div id="editClientModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Client Information</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="coach-access-notice">
                    <i class="fas fa-shield-alt"></i>
                    <span>As a coach, you have full access to edit all client information and goals.</span>
                </div>
                <form id="editClientForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clientName">Full Name</label>
                            <input type="text" id="clientName" name="clientName" required>
                        </div>
                        <div class="form-group">
                            <label for="clientEmail">Email</label>
                            <input type="email" id="clientEmail" name="clientEmail" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clientPhone">Phone</label>
                            <input type="tel" id="clientPhone" name="clientPhone">
                        </div>
                        <div class="form-group">
                            <label for="clientStatus">Status</label>
                            <select id="clientStatus" name="clientStatus">
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="trial">Trial</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="clientGoal">Primary Goal</label>
                        <select id="clientGoal" name="clientGoal">
                            <option value="weight-loss">Weight Loss</option>
                            <option value="muscle-gain">Muscle Gain</option>
                            <option value="endurance">Endurance Training</option>
                            <option value="strength">Strength Training</option>
                            <option value="flexibility">Flexibility</option>
                            <option value="general-fitness">General Fitness</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="targetWeight">Target Weight (lbs)</label>
                            <input type="number" id="targetWeight" name="targetWeight">
                        </div>
                        <div class="form-group">
                            <label for="currentWeight">Current Weight (lbs)</label>
                            <input type="number" id="currentWeight" name="currentWeight">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="sessionsTotal">Total Sessions</label>
                            <input type="number" id="sessionsTotal" name="sessionsTotal">
                        </div>
                        <div class="form-group">
                            <label for="sessionsCompleted">Completed Sessions</label>
                            <input type="number" id="sessionsCompleted" name="sessionsCompleted">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="clientNotes">Coach Notes</label>
                        <textarea id="clientNotes" name="clientNotes" rows="4" placeholder="Add notes about client progress, preferences, or important information..."></textarea>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Client management functions
        function editClient(clientId) {
            // Populate form with client data (in real app, fetch from database)
            const modal = document.getElementById('editClientModal');
            modal.style.display = 'block';
            
            // Example data population - in real app, fetch actual client data
            if (clientId === 1) {
                document.getElementById('clientName').value = 'Sarah Johnson';
                document.getElementById('clientEmail').value = 'sarah.johnson@email.com';
                document.getElementById('clientPhone').value = '(555) 123-4567';
                document.getElementById('clientStatus').value = 'active';
                document.getElementById('clientGoal').value = 'weight-loss';
                document.getElementById('targetWeight').value = '150';
                document.getElementById('currentWeight').value = '165';
                document.getElementById('sessionsTotal').value = '30';
                document.getElementById('sessionsCompleted').value = '24';
                document.getElementById('clientNotes').value = 'Great progress on weight loss. Very motivated and consistent with workouts.';
            }
        }

        function viewProgress(clientId) {
            // Redirect to detailed progress view
            window.location.href = `client-progress.html?id=${clientId}`;
        }

        function addNewClient() {
            // Clear form and show modal
            document.getElementById('editClientForm').reset();
            document.getElementById('editClientModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('editClientModal').style.display = 'none';
        }

        // Form submission
        document.getElementById('editClientForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // In real app, send data to server
            alert('Client information updated successfully!');
            closeModal();
        });

        // Search functionality
        document.getElementById('clientSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const clientCards = document.querySelectorAll('.client-card');
            
            clientCards.forEach(card => {
                const clientName = card.querySelector('h3').textContent.toLowerCase();
                const clientEmail = card.querySelector('.client-email').textContent.toLowerCase();
                
                if (clientName.includes(searchTerm) || clientEmail.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Status filter
        document.getElementById('statusFilter').addEventListener('change', function(e) {
            const filterValue = e.target.value;
            const clientCards = document.querySelectorAll('.client-card');
            
            clientCards.forEach(card => {
                const clientStatus = card.querySelector('.client-status').textContent.toLowerCase();
                
                if (filterValue === 'all' || clientStatus === filterValue) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('editClientModal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>
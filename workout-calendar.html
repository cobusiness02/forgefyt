<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitCoach Pro - Workout Calendar</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="calendar.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        // Authentication check - must be logged in to access this page
        (function() {
            const user = JSON.parse(localStorage.getItem('fitcoach_user') || 'null');
            if (!user || !user.isLoggedIn) {
                window.location.href = 'index.html';
                return;
            }
        })();
    </script>
    <script src="auth.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="dashboard-header">
        <div class="container">
            <div class="header-content">
                <div class="header-left">
                    <a href="coach-dashboard.html" class="back-btn">
                        <i class="fas fa-arrow-left"></i> Dashboard
                    </a>
                    <h1><i class="fas fa-calendar-plus"></i> Workout Calendar</h1>
                </div>
                <div class="user-info">
                    <span class="user-name">Coach Smith</span>
                    <a href="client-management.html" class="manage-clients-btn">
                        <i class="fas fa-users-cog"></i> Manage Clients
                    </a>
                    <a href="#" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                    <img src="https://via.placeholder.com/40x40" alt="Profile" class="profile-pic">
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="calendar-main">
        <div class="container">
            <!-- Calendar Controls -->
            <section class="calendar-controls">
                <div class="calendar-nav">
                    <button class="nav-btn" id="prevMonth">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2 id="currentMonth">November 2025</h2>
                    <button class="nav-btn" id="nextMonth">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="calendar-actions">
                    <select id="clientSelect" class="client-selector">
                        <option value="">All Clients</option>
                        <option value="1">Sarah Johnson</option>
                        <option value="2">Mike Chen</option>
                        <option value="3">Emily Davis</option>
                        <option value="4">Alex Thompson</option>
                    </select>
                    <button class="btn btn-primary" onclick="addWorkout()">
                        <i class="fas fa-plus"></i> Add Workout
                    </button>
                </div>
            </section>

            <!-- Calendar Grid -->
            <section class="calendar-container">
                <div class="calendar-grid">
                    <!-- Calendar Header -->
                    <div class="calendar-header">
                        <div class="day-header">Sun</div>
                        <div class="day-header">Mon</div>
                        <div class="day-header">Tue</div>
                        <div class="day-header">Wed</div>
                        <div class="day-header">Thu</div>
                        <div class="day-header">Fri</div>
                        <div class="day-header">Sat</div>
                    </div>
                    
                    <!-- Calendar Days -->
                    <div class="calendar-days" id="calendarDays">
                        <!-- Days will be generated by JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Upcoming Workouts Summary -->
            <section class="workouts-summary">
                <h3><i class="fas fa-list"></i> This Week's Scheduled Workouts</h3>
                <div class="workout-list">
                    <div class="workout-item">
                        <div class="workout-date">
                            <span class="day">Nov 2</span>
                            <span class="time">9:00 AM</span>
                        </div>
                        <div class="workout-details">
                            <h4>Upper Body Strength</h4>
                            <p>Sarah Johnson</p>
                            <span class="workout-type strength">Strength Training</span>
                        </div>
                        <div class="workout-actions">
                            <button class="edit-workout-btn" onclick="editWorkout(1)">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="delete-workout-btn" onclick="deleteWorkout(1)">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="workout-item">
                        <div class="workout-date">
                            <span class="day">Nov 3</span>
                            <span class="time">10:30 AM</span>
                        </div>
                        <div class="workout-details">
                            <h4>HIIT Cardio</h4>
                            <p>Mike Chen</p>
                            <span class="workout-type cardio">Cardio</span>
                        </div>
                        <div class="workout-actions">
                            <button class="edit-workout-btn" onclick="editWorkout(2)">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="delete-workout-btn" onclick="deleteWorkout(2)">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="workout-item">
                        <div class="workout-date">
                            <span class="day">Nov 4</span>
                            <span class="time">2:00 PM</span>
                        </div>
                        <div class="workout-details">
                            <h4>Yoga & Flexibility</h4>
                            <p>Emily Davis</p>
                            <span class="workout-type flexibility">Flexibility</span>
                        </div>
                        <div class="workout-actions">
                            <button class="edit-workout-btn" onclick="editWorkout(3)">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="delete-workout-btn" onclick="deleteWorkout(3)">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Add/Edit Workout Modal -->
    <div id="workoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Workout</h2>
                <span class="close" onclick="closeWorkoutModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="workoutForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="workoutClient">Client</label>
                            <select id="workoutClient" name="workoutClient" required>
                                <option value="">Select a client</option>
                                <option value="1">Sarah Johnson</option>
                                <option value="2">Mike Chen</option>
                                <option value="3">Emily Davis</option>
                                <option value="4">Alex Thompson</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="workoutDate">Date</label>
                            <input type="date" id="workoutDate" name="workoutDate" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="workoutTime">Time</label>
                            <input type="time" id="workoutTime" name="workoutTime" required>
                        </div>
                        <div class="form-group">
                            <label for="workoutDuration">Duration (minutes)</label>
                            <input type="number" id="workoutDuration" name="workoutDuration" min="15" max="180" value="60">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="workoutTitle">Workout Title</label>
                        <input type="text" id="workoutTitle" name="workoutTitle" placeholder="e.g., Upper Body Strength" required>
                    </div>

                    <div class="form-group">
                        <label for="workoutType">Workout Type</label>
                        <select id="workoutType" name="workoutType" required>
                            <option value="strength">Strength Training</option>
                            <option value="cardio">Cardio</option>
                            <option value="flexibility">Flexibility/Yoga</option>
                            <option value="hiit">HIIT</option>
                            <option value="endurance">Endurance</option>
                            <option value="sports">Sports Specific</option>
                            <option value="recovery">Recovery/Mobility</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="workoutExercises">Exercises</label>
                        <textarea id="workoutExercises" name="workoutExercises" rows="4" placeholder="List exercises, sets, and reps...&#10;e.g.:&#10;- Squats: 3 sets x 12 reps&#10;- Push-ups: 3 sets x 10 reps&#10;- Plank: 3 sets x 30 seconds"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="workoutNotes">Coach Notes</label>
                        <textarea id="workoutNotes" name="workoutNotes" rows="3" placeholder="Additional notes, modifications, or instructions for the client..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="notifyClient" name="notifyClient" checked>
                            <span class="checkmark"></span>
                            Notify client about this workout
                        </label>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeWorkoutModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Workout</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Calendar functionality
        let currentDate = new Date();
        let selectedDate = null;

        // Sample workout data
        const workouts = {
            '2025-11-02': [
                { id: 1, client: 'Sarah Johnson', time: '09:00', title: 'Upper Body Strength', type: 'strength' }
            ],
            '2025-11-03': [
                { id: 2, client: 'Mike Chen', time: '10:30', title: 'HIIT Cardio', type: 'cardio' }
            ],
            '2025-11-04': [
                { id: 3, client: 'Emily Davis', time: '14:00', title: 'Yoga & Flexibility', type: 'flexibility' }
            ]
        };

        function generateCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // Update month display
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                              'July', 'August', 'September', 'October', 'November', 'December'];
            document.getElementById('currentMonth').textContent = `${monthNames[month]} ${year}`;
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            const calendarDays = document.getElementById('calendarDays');
            calendarDays.innerHTML = '';
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day empty';
                calendarDays.appendChild(emptyDay);
            }
            
            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const dayWorkouts = workouts[dateStr] || [];
                
                dayElement.innerHTML = `
                    <div class="day-number">${day}</div>
                    <div class="day-workouts">
                        ${dayWorkouts.map(workout => `
                            <div class="workout-indicator ${workout.type}" title="${workout.time} - ${workout.title} (${workout.client})">
                                <span class="workout-time">${workout.time}</span>
                                <span class="workout-client">${workout.client.split(' ')[0]}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                // Add click event to open workout modal
                dayElement.addEventListener('click', () => {
                    selectedDate = dateStr;
                    document.getElementById('workoutDate').value = dateStr;
                    addWorkout();
                });
                
                // Highlight today
                const today = new Date();
                if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                    dayElement.classList.add('today');
                }
                
                calendarDays.appendChild(dayElement);
            }
        }

        function addWorkout() {
            document.getElementById('modalTitle').textContent = 'Add New Workout';
            document.getElementById('workoutForm').reset();
            if (selectedDate) {
                document.getElementById('workoutDate').value = selectedDate;
            }
            document.getElementById('workoutModal').style.display = 'block';
        }

        function editWorkout(workoutId) {
            // In a real app, fetch workout data by ID
            document.getElementById('modalTitle').textContent = 'Edit Workout';
            document.getElementById('workoutModal').style.display = 'block';
            // Populate form with existing workout data
        }

        function deleteWorkout(workoutId) {
            if (confirm('Are you sure you want to delete this workout?')) {
                // In a real app, delete from database
                alert('Workout deleted successfully!');
                // Refresh calendar and workout list
            }
        }

        function closeWorkoutModal() {
            document.getElementById('workoutModal').style.display = 'none';
            selectedDate = null;
        }

        // Event listeners
        document.getElementById('prevMonth').addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar();
        });

        document.getElementById('nextMonth').addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar();
        });

        document.getElementById('workoutForm').addEventListener('submit', (e) => {
            e.preventDefault();
            // In a real app, save to database
            alert('Workout saved successfully!');
            closeWorkoutModal();
            generateCalendar(); // Refresh calendar
        });

        // Client filter
        document.getElementById('clientSelect').addEventListener('change', (e) => {
            const selectedClient = e.target.value;
            // Filter calendar and workout list by client
            // Implementation would filter the display based on selected client
        });

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('workoutModal');
            if (event.target === modal) {
                closeWorkoutModal();
            }
        }

        // Initialize calendar
        generateCalendar();
    </script>
</body>
</html>